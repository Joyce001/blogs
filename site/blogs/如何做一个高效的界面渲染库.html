<!DOCTYPE html><html><head><title>yibuyisheng's blogs</title><style type="text/css">.container {
    display: flex;
}
.nav {
    margin-right: 20px;
}
.content {
    flex: 1;
    line-height: 1.3em;
}
</style></head><body><div class="container"><div class="nav"><h3><a href="/site/index.html">首页</a></h3><h5><a href="/site/blogs/Reflux 使用进化日记.html">Reflux 使用进化日记</a></h5><h5><a href="/site/blogs/generator.html">generator</a></h5><h5><a href="/site/blogs/如何做一个高效的界面渲染库.html">如何做一个高效的界面渲染库</a></h5><h5><a href="/site/blogs/百度 EFE 前端框架学习笔记（ef）.html">百度 EFE 前端框架学习笔记（ef）</a></h5><h5><a href="/site/blogs/百度 EFE 前端框架学习笔记（er）.html">百度 EFE 前端框架学习笔记（er）</a></h5><h5><a href="/site/blogs/百度 EFE 前端框架学习笔记（esui）.html">百度 EFE 前端框架学习笔记（esui）</a></h5><h5><a href="/site/blogs/记一次坑爹的对接经历.html">记一次坑爹的对接经历</a></h5></div><div class="content"><p>最近炒的比较火的框架莫过于 Angular 和 React 了，前者做了一件 MVVM 的事情，后者实现了虚拟 DOM 、单项数据流等，都是比较炫酷的。</p>
<p>了解了这些东西之后，自己难免手痒，于是尝试着去写一个类似的东西。</p>
<p>实际上，一个库或者框架要掌管界面（实现数据变动后可直接渲染到界面上，不需要复杂的 DOM 操作），关键是要做好一件事情：如何把数据高效地反映到界面上去？</p>
<p>Angular 使用的方式是，开发者可以自己写很多指令（ directive ），这些指令会在初始化的时候注册到 Angular 内部。当然， Angular 也提供了一些基础指令，比如 ngRepeat 等。在初始化的时候， Angular 会去搜集 DOM 树中的指令和表达式，搜集之后形成一系列函数。完成搜集之后，便与数据发生连接，将数据与这些指令、表达式关联起来，这样的话，只要数据一发生变动，就会及时反映到界面上了。</p>
<p>React 采用了另外一种形式来处理，它并不去遍历 DOM 树搜集一堆东西，而是直接自己虚拟了一层 DOM 树，数据更新首先会反映到虚拟 DOM 树上，然后再计算出最小的实际 DOM 树改变，最后再去改动 DOM 。</p>
<p>此处，还是采用 Angular 的做法，自己去搜集 DOM 树中的表达式，然后生成更新函数。初步鼓捣出来的源码在此处<a href=""></a></p>
<h3 id="-">第一步：</h3>
<div id="disqus_thread" class="container"></div></div></div><script type="text/javascript">/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'yibuyisheng';
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript>Please enable JavaScript to view the<a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a><a href="http://disqus.com" class="dsq-brlink"></a>blog comments powered by</noscript><span class="logo-disqus"></span></body></html>